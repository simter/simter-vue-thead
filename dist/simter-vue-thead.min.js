/*!
* simter-vue-thead v0.4.3
* @author RJ.Hwang <rongjihuang@gmail.com>
* @license MIT
*/
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global["simter-vue-thead"]={})})(this,function(exports){"use strict";const component={replace:true,props:{columns:{type:Array,required:true},classes:{type:String|Object|Array,required:false,default(){return[]}},styles:{type:String|Object|Array,required:false,default(){return{}}}},computed:{rows(){return transform(deepClone(this.columns))},$_classes(){if(typeof this.classes==="string"||Array.isArray(this.classes))return{thead:this.classes};else if(typeof this.classes==="object")return this.classes;else return{}},$_styles(){if(typeof this.styles==="string"||Array.isArray(this.styles))return{thead:this.styles};else if(typeof this.styles==="object")return this.styles;else return{}}}};function transform(columns){columns=polishing(columns);columns.forEach(column=>{descendantDepth(column);leafCount(column)});const rows=flattenWithSelf(columns,true).reduce(function(result,column){if(!result[column.$_rowIndex])result[column.$_rowIndex]=[column];else result[column.$_rowIndex].push(column);return result},[]);rows.forEach(row=>{row.forEach(column=>{if(column.$_depth===0){const depth=row.filter(c=>c!==column).reduce((a,b)=>Math.max(a,b.$_depth),0);if(depth>0)column.rowspan=depth+1}})});rows.forEach(row=>{row.forEach(column=>{delete column.$_rowIndex;delete column.$_depth})});return rows}function polishing(columns){for(let i=0;i<columns.length;i++){const column=columns[i];if(typeof column==="object"){if(column.children)column.children=polishing(column.children)}else columns[i]={label:column}}return columns}function descendantDepth(column){if(!column.hasOwnProperty("$_rowIndex"))column.$_rowIndex=0;let d;if(column.children&&column.children.length>0){d=0;column.children.forEach(child=>{child.$_rowIndex=column.$_rowIndex+1;d=Math.max(d,descendantDepth(child))});d++}else d=0;column.$_depth=d;return d}function leafCount(column){let count;if(column.children&&column.children.length>0){count=0;column.children.forEach(child=>{count+=leafCount(child)})}else count=1;if(count>1)column.colspan=count;return count}function flattenWithSelf(columns,removeChildren){if(removeChildren===null||removeChildren===undefined)removeChildren=true;let result=columns.reduce((a,b)=>{if(b.children){return a.concat(b,flattenWithSelf(b.children,removeChildren))}else return a.concat(b)},[]);if(removeChildren)result.forEach(column=>{if(column.hasOwnProperty("children"))delete column.children});return result}function deepClone(obj){let copy;if(null==obj||"object"!==typeof obj)return obj;if(obj instanceof Date){copy=new Date;copy.setTime(obj.getTime());return copy}if(obj instanceof Array){copy=[];for(let i=0,len=obj.length;i<len;i++){copy[i]=deepClone(obj[i])}return copy}if(obj instanceof Object){copy={};for(let attr in obj){if(obj.hasOwnProperty(attr))copy[attr]=deepClone(obj[attr])}return copy}throw new Error("Unable to copy obj! Its type isn't supported.")}const __vue_script__=component;var __vue_render__=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("thead",{class:_vm.$_classes.thead,style:_vm.$_styles.thead},_vm._l(_vm.rows,function(row,rowIndex){return _c("tr",{key:"row-"+rowIndex,class:_vm.$_classes.row,style:_vm.$_styles.row},_vm._l(row,function(cell,cellIndex){return _c("th",{key:"cell-"+cellIndex,class:[_vm.$_classes.cell,cell.headerClass],style:[_vm.$_styles.cell,cell.headerStyle],attrs:{colspan:cell.colspan,rowspan:cell.rowspan}},[_vm._v(_vm._s(cell.label||cell))])}),0)}),0)};var __vue_staticRenderFns__=[];__vue_render__._withStripped=true;const __vue_inject_styles__=undefined;const __vue_scope_id__=undefined;const __vue_module_identifier__=undefined;const __vue_is_functional_template__=false;function __vue_normalize__(template,style,script,scope,functional,moduleIdentifier,createInjector,createInjectorSSR){const component$$1=(typeof script==="function"?script.options:script)||{};component$$1.__file="D:\\work\\simter\\simter-vue\\simter-vue-thead\\src\\thead.vue";if(!component$$1.render){component$$1.render=template.render;component$$1.staticRenderFns=template.staticRenderFns;component$$1._compiled=true;if(functional)component$$1.functional=true}component$$1._scopeId=scope;return component$$1}var thead=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,undefined,undefined);exports.default=thead;exports.transform=transform;exports.polishing=polishing;exports.descendantDepth=descendantDepth;exports.leafCount=leafCount;exports.flattenWithSelf=flattenWithSelf;exports.deepClone=deepClone;Object.defineProperty(exports,"__esModule",{value:true})});
//# sourceMappingURL=true